{% extends 'api/main.html' %}

{% block header_message %}
	<h1><a>Communication Manager - Posts List</a></h1>
{% endblock %}

{% block content %}
	{% for post in posts %}
	    <div class="post">
	        <h1><a href="">{{ post.title }}</a></h1>
	        <p>{{ post.text|linebreaksbr }}</p>
	        <div class="date">
	            <p>published: {{ post.published_date }}</p>
	        </div>
	    </div>
	{% endfor %}
{% endblock %}

{% block scripts %}
	<script>
  // This is called with the results from from FB.getLoginStatus().
  function statusChangeCallback(response) {
    console.log('statusChangeCallback');
    console.log(response);
    if (response.status !== 'connected') {
      // Logged into your app and Facebook.
	  window.location.replace('/login');
    }
  }

  // This function is called when someone finishes with the Login
  // Button.  See the onlogin handler attached to it in the sample
  // code below.
  function checkLoginState() {
    FB.getLoginStatus(function(response) {
      console.log(response.status);
      statusChangeCallback(response);
    });
  }
</script>
{% endblock %}
