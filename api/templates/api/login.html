{% extends 'api/main.html' %}

{% block header_message %}
	<h1><a href="/">Login</a></h1>
{% endblock %}

{% block scripts %}
	<script>
  function fbLogin() {
  	FB.login(function(response) {
  	  if (response.status === 'connected') {
  	  	window.location.replace('/');
  	  }
  	});
  }
  // This is called with the results from from FB.getLoginStatus().
  function statusChangeCallback(response) {
    // The response object is returned with a status field that lets the
    // app know the current login status of the person.
    // Full docs on the response object can be found in the documentation
    // for FB.getLoginStatus().
    if (response.status === 'connected') {
      // Logged into your app and Facebook.
      window.location.replace('/');
    } else {
    	console.log('not connected.');
    }
  }

  // This function is called when someone finishes with the Login
  // Button.  See the onlogin handler attached to it in the sample
  // code below.
  function checkLoginState() {
    FB.getLoginStatus(function(response) {
      console.log(response.status);
      statusChangeCallback(response);
    });
  }
</script>
{% endblock %}

{% block content %}
	<a href="#" onclick="fbLogin();" class="w-inline-block registration_fb">
		Login with Facebook
	</a>
	<!-- <fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
	</fb:login-button> -->

	<div id="status">
	</div>
{% endblock %}